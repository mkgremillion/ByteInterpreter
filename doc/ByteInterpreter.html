<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ByteInterpreter
  
    &mdash; Documentation by YARD 0.9.16
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ByteInterpreter";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (B)</a> &raquo;
    
    
    <span class="title">ByteInterpreter</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ByteInterpreter
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ByteInterpreter</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/byte_interpreter/byte_interpreter.rb<span class="defines">,<br />
  lib/byte_interpreter/byte_interpreter/instructions.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The ByteInterpreter is a tool used to extract bytes and strings from a
binary file, and also to encode bytes and strings into a binary file. It
can also take a series of instructions to extract or encode data in an
ordinal manner, suitable for writing binary files with rigid structure size
requirements.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="ByteInterpreter/Instructions.html" title="ByteInterpreter::Instructions (class)">Instructions</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#endian_mode-instance_method" title="#endian_mode (instance method)">#<strong>endian_mode</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Reads the endian mode being used by the interpreter.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#encode_bytes-instance_method" title="#encode_bytes (instance method)">#<strong>encode_bytes</strong>(value:, size:, signed:)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Writes a set number of bytes, encoded from the given value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#encode_from_instructions-instance_method" title="#encode_from_instructions (instance method)">#<strong>encode_from_instructions</strong>(values:)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Uses the loaded instructions (you did call #load_instructions first,
right?) to encode the given values into bytes and strings, and write them
to the stream.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#encode_string-instance_method" title="#encode_string (instance method)">#<strong>encode_string</strong>(value:, size:)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Writes a string into a given number of bytes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(endian: nil, stream:)  &#x21d2; ByteInterpreter </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates and sets up a new ByteInterpreter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#interpret_bytes-instance_method" title="#interpret_bytes (instance method)">#<strong>interpret_bytes</strong>(size: 2, signed: false)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Reads a set number of bytes, interprets them into an integer, and returns
the result.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#interpret_from_instructions-instance_method" title="#interpret_from_instructions (instance method)">#<strong>interpret_from_instructions</strong> {|key, value| ... } &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Uses the loaded instructions (you did call #load_instructions first,
right?) to interpret bytes and strings from the stream, passing them as
arguments to the given block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#interpret_string-instance_method" title="#interpret_string (instance method)">#<strong>interpret_string</strong>(size:)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Reads a set number of bytes, interprets them into a string, and returns the
result.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#iostream=-instance_method" title="#iostream= (instance method)">#<strong>iostream=</strong>(new_stream)  &#x21d2; ByteInterpreter </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Changes the stream being used by the interpreter for operations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_instructions-instance_method" title="#load_instructions (instance method)">#<strong>load_instructions</strong>(type:, filename:)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Loads instructions from a file for structured, ordinal operations.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(endian: nil, stream:)  &#x21d2; <tt><span class='object_link'><a href="" title="ByteInterpreter (class)">ByteInterpreter</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates and sets up a new ByteInterpreter.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>endian</span>
      
      
        <span class='type'>(<tt>:little</tt>, <tt>:big</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Default for this value is nil. The endian mode that will be used by the
interpreter for reading/writing bytes. If nil is specified, the interpreter
will assume machine-native endianness.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>stream</span>
      
      
        <span class='type'>(<tt>#read</tt>, <tt>#write</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The IO stream, or IO-like object, that the interpreter will perform
operations on. The interpreter will not open or close the stream for you,
and assumes you have already changed the position to the appropriate offset
for its operations. The interpreter also assumes you have opened the stream
as binary (as opposed to text), and for the appropriate operations
(read/write).</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>endian:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>stream:</span><span class='rparen'>)</span>
  <span class='ivar'>@endian_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_endian'>endian</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='ivar'>@instructions</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_iostream'>iostream</span> <span class='op'>=</span> <span class='id identifier rubyid_stream'>stream</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="endian_mode-instance_method">
  
    #<strong>endian_mode</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Reads the endian mode being used by the interpreter.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_endian_mode'>endian_mode</span>
  <span class='ivar'>@endian_mode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="encode_bytes-instance_method">
  
    #<strong>encode_bytes</strong>(value:, size:, signed:)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>The interpreter makes no attempt to ensure that your <code>value</code>
fits into <code>size</code> bytes. To avoid unintended behavior, you should
validate your input into this method.</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Writes a set number of bytes, encoded from the given value.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The value to encode and write.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>size</span>
      
      
        <span class='type'>(<tt>1</tt>, <tt>2</tt>, <tt>4</tt>, <tt>8</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The size of the value in bytes.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>signed</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Set this to true if the bytes being written can be negative and positive,
false otherwise.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_encode_bytes'>encode_bytes</span><span class='lparen'>(</span><span class='label'>value:</span><span class='comma'>,</span> <span class='label'>size:</span><span class='comma'>,</span> <span class='label'>signed:</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:pack</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@iostream</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='id identifier rubyid_build_directive'>build_directive</span><span class='lparen'>(</span><span class='label'>size:</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='label'>signed:</span> <span class='id identifier rubyid_signed'>signed</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="encode_from_instructions-instance_method">
  
    #<strong>encode_from_instructions</strong>(values:)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Uses the loaded instructions (you did call #load_instructions first,
right?) to encode the given values into bytes and strings, and write them
to the stream.</p>

<p>This method encodes and writes bytes in the order of the loaded
instructions; this means it will seek each key from the given Hash, instead
of seeking around the file and writing in whatever order the Hash may be
in.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>values</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The values to read and encode. This Hash *<strong>must</strong>* have keys
that match <strong>all</strong> keys from the loaded instructions.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the combined size, in bytes, of the operation</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_encode_from_instructions'>encode_from_instructions</span><span class='lparen'>(</span><span class='label'>values:</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_struct_size'>struct_size</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@instructions</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bin</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_encode_bytes'>encode_bytes</span><span class='lparen'>(</span><span class='label'>value:</span> <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>signed:</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:signed</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>str</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_encode_string'>encode_string</span><span class='lparen'>(</span><span class='label'>value:</span> <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='label'>size:</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_struct_size'>struct_size</span> <span class='op'>=</span> <span class='id identifier rubyid_struct_size'>struct_size</span> <span class='op'>+</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_struct_size'>struct_size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="encode_string-instance_method">
  
    #<strong>encode_string</strong>(value:, size:)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>If <code>value</code> is smaller than <code>size</code>, the interpreter
will pad <code>value</code> with 0x20 to fill the remaining space. Even so,
care should be taken to validate your input to this method, especially if
you want to handle strings that are larger than <code>size</code>, or want
to handle size differences differently than this method.</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Writes a string into a given number of bytes.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The value to write to the stream.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>size</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The size of the value in bytes. Unlike #encode_bytes, this size can be any
positive integer.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 104</span>

<span class='kw'>def</span> <span class='id identifier rubyid_encode_string'>encode_string</span><span class='lparen'>(</span><span class='label'>value:</span><span class='comma'>,</span> <span class='label'>size:</span><span class='rparen'>)</span>
  <span class='ivar'>@iostream</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_ljust'>ljust</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x20</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="interpret_bytes-instance_method">
  
    #<strong>interpret_bytes</strong>(size: 2, signed: false)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Reads a set number of bytes, interprets them into an integer, and returns
the result.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>size</span>
      
      
        <span class='type'>(<tt>1</tt>, <tt>2</tt>, <tt>4</tt>, <tt>8</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of bytes to read from the stream. ByteInterpreter can only
interpret 8-, 16-, 32-, and 64-bit values at this time, so this parameter
is limited to just a few numbers.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>signed</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Default for this value is false. Set this to true if the bytes being read
can be negative or positive.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the interpreted byte</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_interpret_bytes'>interpret_bytes</span><span class='lparen'>(</span><span class='label'>size:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>signed:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_bytes'>bytes</span> <span class='op'>=</span> <span class='ivar'>@iostream</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_directive'>directive</span> <span class='op'>=</span> <span class='id identifier rubyid_build_directive'>build_directive</span><span class='lparen'>(</span><span class='label'>size:</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='label'>signed:</span> <span class='id identifier rubyid_signed'>signed</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_bytes'>bytes</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='id identifier rubyid_directive'>directive</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="interpret_from_instructions-instance_method">
  
    #<strong>interpret_from_instructions</strong> {|key, value| ... } &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Uses the loaded instructions (you did call #load_instructions first,
right?) to interpret bytes and strings from the stream, passing them as
arguments to the given block.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The key of the interpreted data. Typically used to set variables in the
calling object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The value of the interpreted data.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the combined size, in bytes, of the operation</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 131</span>

<span class='kw'>def</span> <span class='id identifier rubyid_interpret_from_instructions'>interpret_from_instructions</span>
  <span class='id identifier rubyid_struct_size'>struct_size</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@instructions</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bin</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_interpret_bytes'>interpret_bytes</span><span class='lparen'>(</span><span class='label'>size:</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>signed:</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:signed</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>str</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_interpret_string'>interpret_string</span><span class='lparen'>(</span><span class='label'>size:</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_struct_size'>struct_size</span> <span class='op'>=</span> <span class='id identifier rubyid_struct_size'>struct_size</span> <span class='op'>+</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span>

    <span class='kw'>yield</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_struct_size'>struct_size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="interpret_string-instance_method">
  
    #<strong>interpret_string</strong>(size:)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Reads a set number of bytes, interprets them into a string, and returns the
result.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>size</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of bytes to read from the stream. Unlike #interpret_bytes, this
size can be any positive integer.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the interpreted string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_interpret_string'>interpret_string</span><span class='lparen'>(</span><span class='label'>size:</span> <span class='rparen'>)</span>
  <span class='ivar'>@iostream</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="iostream=-instance_method">
  
    #<strong>iostream=</strong>(new_stream)  &#x21d2; <tt><span class='object_link'><a href="" title="ByteInterpreter (class)">ByteInterpreter</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Changes the stream being used by the interpreter for operations.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>new_stream</span>
      
      
        <span class='type'>(<tt>#read</tt>, <tt>#write</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The IO stream, or IO-like object, that the interpreter will perform
operations on. See #new for what is expected of this stream.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="ByteInterpreter (class)">ByteInterpreter</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>self</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43
44
45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_iostream='>iostream=</span><span class='lparen'>(</span><span class='id identifier rubyid_new_stream'>new_stream</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_stream_like?'>stream_like?</span><span class='lparen'>(</span><span class='label'>obj:</span> <span class='id identifier rubyid_new_stream'>new_stream</span><span class='rparen'>)</span>
    <span class='ivar'>@iostream</span> <span class='op'>=</span> <span class='id identifier rubyid_new_stream'>new_stream</span> <span class='kw'>if</span> <span class='id identifier rubyid_stream_like?'>stream_like?</span><span class='lparen'>(</span><span class='label'>obj:</span> <span class='id identifier rubyid_new_stream'>new_stream</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Object given is not stream-like.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_instructions-instance_method">
  
    #<strong>load_instructions</strong>(type:, filename:)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>ByteInterpreter comes with only one <code>type</code> built-in: JSON.</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Loads instructions from a file for structured, ordinal operations.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The type of the file that holds the instructions. This argument
*<strong>must</strong>* have a corresponding method in the
ByteInterpreter::Instructions class, named <code>load_from_type</code>,
replacing <code>type</code> with the actual name of the filetype.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The filename of the instructions to load.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119
120
121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/byte_interpreter/byte_interpreter.rb', line 117</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_instructions'>load_instructions</span><span class='lparen'>(</span><span class='label'>type:</span><span class='comma'>,</span> <span class='label'>filename:</span><span class='rparen'>)</span>
  <span class='ivar'>@instructions</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="ByteInterpreter/Instructions.html" title="ByteInterpreter::Instructions (class)">Instructions</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="ByteInterpreter/Instructions.html#initialize-instance_method" title="ByteInterpreter::Instructions#initialize (method)">new</a></span></span> <span class='kw'>if</span> <span class='ivar'>@instructions</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='ivar'>@instructions</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@instructions</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>load_from_</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Aug 31 09:25:45 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.16 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>